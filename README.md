### 1. Задание: «Корзина» магазина
#### 1.1 Общее описание

Цель мини-проекта - реализовать простое API “корзины” интернет-магазина для неавторизованных пользователей. Возможности зарегистрироваться или залогиниться в магазин нет.

В магазине имеется неограниченный запас фиксированного набора продуктов (например, бутылка молока, булка хлеба, палка колбасы).

Пользовательского интерфейса у системы нет. Посетитель через вызовы API может просмотреть список продуктов, добавить любой продукт себе в корзину любое количество раз, удалить ранее помещенный продукт из корзины и просмотреть свою корзину.

#### Обязательные требования:

  + Формат данных: JSON.
  + Использование MVC-фреймворка:
    + для PHP - Laravel или Symfony,
    + для Ruby - Ruby on Rails,
    + для Node.js - Express или Koa
  + **Следовать Best practices и Style guide для выбранного языка программирования и фреймворка**
  + Хранение и доступ к типам продуктов реализовать по своему усмотрению, хоть в виде массива в коде
  + Достаточное время хранения корзины - 5 минут или до закрытия браузера, постоянное хранение данных на сервере не требуется.

#### Бонусные задачи:

  1. Валидация данных
  2. Обработка ошибок
  3. Обработка типов запросов (GET, POST, DELETE)
  4. Методы должны возвращать соответствующие Status-Code:

      a. Все успешные запросы возвращают: 200

      b. Ошибки входящих параметров: 400

      c. При доступе к несуществующему методу: 404

      d. При внутренней ошибке сервера: 50
  5. Unit-тесты, покрывающие некоторый функционал
  6. Описание установки системы

#### 1.2 Описание установки мини-проекта

Для работы с приложением, в Вашей операционной системе должна быть установлена служебная программа командной строки, поддерживающая протокол передачи гипертекста HTTP. (Ниже приведены примеры запросов с помошью инструмента [cURL](https://curl.haxx.se/)). Также для запуска приложения потребуется менеджер библиотек [Bundler](https://bundler.io/)).

  - скопируйте приложение из репозитория

    `git clone `

  - переключитесь на созданную дирректорию

  - скачайте менеджер библиотек

    `gem install bundler`

  - запустите менеджер библиотек

    `bundle install`

  - выполните настройку базы данных

    `bundle exec rails db:migrate`

  - выполните предварительное заполнение

    `bundle exec rails db:seed`

  - локально запустите сервер приложения

    `bundle exec rails s`

  - выполните нужные Вам команды из примеров

    1 . Получение списка продуктов **GET /api/products**

        `curl -X GET http://localhost:3000/api/products`

    2 . Добавление продукта в корзину **POST /api/cart**

        `curl --data "product_id=<YOUR_PRODUCT_ID>&quantity=<YOUR_QUANTITY>" http://localhost:3000/api/cart`

    3 . Удаление продукта из корзины **DELETE /api/cart/{product_id}**

        `curl -X DELETE http://localhost:3000/api/cart/<YOUR_PRODUCT_ID>`

    4 . Получение информации о корзине **GET /api/cart**

        `curl -X GET http://localhost:3000/api/cart`

program|version
:---:|:---:
Ruby|2.5.5p157
Rails|6.0.2.1
curl|7.58.0

#### 1.3 Спецификация API

1. Получение списка продуктов

   **GET /api/products**

   `curl -X GET http://localhost:3000/api/products`

   *Принимаемые параметры:* нет.

   *Возвращаемые данные:*

   ```
   "data":[
       {
           "id":"1",
           "name":"Product #1",
           "description":"Product Description",
           "price":"50"
       }, {
           "id":"2",
           "name":"Product #2",
           "description":"Product Description",
           "price":"150"
       }
   ]
   ```

2. Добавление продукта в корзину

   **POST /api/cart**

   `curl --data "product_id=<YOUR_PRODUCT_ID>&quantity=<YOUR_QUANTITY>" http://localhost:3000/api/cart`

   *Принимаемые параметры:*

   Параметр|Тип|Комментарий
   ---|---|---
   product_id|integer|ID продукта, обязательный
   quantity|integer|Количество, целое число от 1 до 10

   *Комментарий*: Если такой продукт уже есть в корзине, то счетчик количества продуктов возрастает на значение поля quantity.

   Если ID такого продукта не существует, метод возвращает ошибку (см. пункт “Ошибки”).

   Если значение quantity не валидно, метод возвращает (см. пункт “Ошибки”).

   *Возвращаемые данные:* нет

   *Примечания к задаче:* обработка ошибок - опциональна

3. Удаление продукта из корзины

   **DELETE /api/cart/{product_id}**

   `curl -X DELETE http://localhost:3000/api/cart/<YOUR_PRODUCT_ID>`

   *Принимаемые параметры:*

   Параметр|Тип|Комментарий
   ---|---|---
   product_id|integer|ID продукта, обязательный

   *Комментарий*: если количество таких продуктов в корзине равно 1, то продукт удаляется, если продуктов несколько, то счетчик количества убывает на 1.

   Если ID такого продукта не существует, метод возвращает ошибку 400, с сообщением “Такого продукта нет в системе”.

   *Возвращаемые данные:* нет

   *Примечания к задаче:*
   + HTTP метод DELETE - опциональный.
   + Обработка ошибок - опциональна

4. Получение информации о корзине

   **GET /api/cart**

   `curl -X GET http://localhost:3000/api/cart`

   *Принимаемые параметры:* нет.

   *Возвращаемые данные:* список продуктов в формате JSON:

   ```
   "data": {
          "total_sum": "500",
          "products_count": "6",
          "products":[
               {
                   "id":"1",
                   "quantity":"4",
                   "sum":"200"
               }, {
                   "id":"2",
                   "quantity":"2",
                   "sum":"300"
               }
           ]
       }
   ```

#### 1.4 Ошибки

1. Неверные параметры запроса

   *Возвращаемые данные:*

   **HTTP Status code: 400**

   ```
   {
        "error":{
            "params":[
                {
                    "code":"required",
                    "message":"Product cannot be blank.",
                    “name":"product_id"
                }, {
                    "code":"required",
                    "message":"Quantity cannot be blank.",
                    "name":"quantity"
                }
            ],
            "type":"invalid_param_error",
            "message":"Invalid data parameters"
        }
   }
   ```

2. Запрашиваемый метод не существует

   *Возвращаемые данные:*

   **HTTP Status code: 404**
   ```
    {
        "error":{
            "type":"invalid_request_error",
            "message":"Unable to resolve the request \"api\/info\"."
        }
    }
   ```
**END**
